var e=(e,t,a)=>new Promise(((o,A)=>{var r=e=>{try{n(a.next(e))}catch(t){A(t)}},i=e=>{try{n(a.throw(e))}catch(t){A(t)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,t)).next())}));import{_ as t}from"./Demo.9ecb8065.js";import{_ as a,i as o,T as A,I as r}from"./index.59e593d7.js";import{T as i}from"./table.a5fc695a.js";import{L as n}from"./lazy.e68ee447.js";import{b as s,r as p,O as l,U as c,j as d,Q as u,n as D,R as h,S as C}from"./vendor.b3232dc0.js";import"./code.3da98d69.js";import"./pagination.c724356e.js";import"./index.e18b8715.js";const m={title:"服务端数据",headers:[],frontmatter:{}};var B=a(s({setup(){const t=p(),a=p(!1),o=p([]);function A(e={}){return e=Object.keys(e).map((t=>t.replace(/[A-Z]/,(e=>`_${e.toLowerCase()}`))+`=${e[t]}`)).join("&"),new Promise((t=>{const a=new XMLHttpRequest;a.open("GET",`https://cps.fdota.com/products?${e}`),a.onreadystatechange=function(){4==a.readyState&&t(JSON.parse(a.responseText))},a.send(null)}))}function r(){return e(this,arguments,(function*(e={}){a.value=!0;const{data:r,meta:{current_page:i,per_page:n,total:s}}=yield A(e);o.value=r,t.value={page:i,perPage:n,total:s},a.value=!1}))}return r(),{handleOptions:({sortBy:e,sortDesc:t,pagination:{page:a,perPage:o}})=>{r({page:a,perPage:o,sortBy:e,descending:t[0]?"desc":"asc"})},loading:a,headers:p([{text:"封面",width:80,value:"cover"},{text:"标题",minWidth:200,value:"short_title"},{text:"原价",width:120,value:"coupons.0.coupon_product.original_price"},{text:"券后价",width:120,value:"coupons.0.coupon_product.price"},{text:"销量",width:120,value:"sales_count",sortable:!0},{text:"分类",width:120,value:"category_unionid"},{text:"商家",width:150,value:"shop.name"},{text:"商家地址",width:120,value:"provcity"}]),items:o,pagination:t,fetch:r}}}),[["render",function(e,a,s,p,m,B){const v=o,g=A,E=r,f=i,x=n,y=t;return l(),c("div",null,[d(y,{title:"服务端数据",slug:"服务端数据",file:"/packages/veno-ui/src/components/table/docs/remote.md",code:"%3Ctemplate%3E%0A%20%20%3Cve-lazy%3E%0A%20%20%20%20%3Cve-table%0A%20%20%20%20%20%20remote%0A%20%20%20%20%20%20fixed-header%0A%20%20%20%20%20%20height%3D%22400%22%0A%20%20%20%20%20%20%3Aheaders%3D%22headers%22%0A%20%20%20%20%20%20%3Aitems%3D%22items%22%0A%20%20%20%20%20%20%3Aloading%3D%22loading%22%0A%20%20%20%20%20%20%3Apagination%3D%22pagination%22%0A%20%20%20%20%20%20%40update%3Aoptions%3D%22handleOptions%22%0A%20%20%20%20%3E%0A%20%20%20%20%20%20%3Ctemplate%20%23item.short_title%3D%22%7B%20item%20%7D%22%3E%0A%20%20%20%20%20%20%20%20%3Cve-tooltip%0A%20%20%20%20%20%20%20%20%20%20%23activator%3D%22%7B%20props%20%7D%22%0A%20%20%20%20%20%20%20%20%20%20%3Atext%3D%22item.title%22%0A%20%20%20%20%20%20%20%20%20%20%3Aopen-delay%3D%22500%22%0A%20%20%20%20%20%20%20%20%20%20anchor%3D%22top%22%0A%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%3Cve-link%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Ahref%3D%22item.url%22%0A%20%20%20%20%20%20%20%20%20%20%20%20target%3D%22_blank%22%0A%20%20%20%20%20%20%20%20%20%20%20%20v-bind%3D%22props%22%0A%20%20%20%20%20%20%20%20%20%20%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%7B%20item.short_title%20%7D%7D%0A%20%20%20%20%20%20%20%20%20%20%3C%2Fve-link%3E%0A%20%20%20%20%20%20%20%20%3C%2Fve-tooltip%3E%0A%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%0A%20%20%20%20%20%20%3Ctemplate%20%23item.cover%3D%22%7B%20item%20%7D%22%3E%0A%20%20%20%20%20%20%20%20%3Cve-image%20%3Asrc%3D%22item.cover%22%20width%3D%2250%22%20%3Aaspect-ratio%3D%221%22%20%2F%3E%0A%20%20%20%20%20%20%3C%2Ftemplate%3E%0A%20%20%20%20%3C%2Fve-table%3E%0A%20%20%3C%2Fve-lazy%3E%0A%3C%2Ftemplate%3E%0A%0A%3Cscript%3E%0A%20%20import%20%7B%20defineComponent%2C%20ref%20%7D%20from%20'vue'%0A%0A%20%20export%20default%20defineComponent(%7B%0A%20%20%20%20setup%20()%20%7B%0A%20%20%20%20%20%20const%20pagination%20%3D%20ref()%0A%20%20%20%20%20%20const%20loading%20%3D%20ref(false)%0A%20%20%20%20%20%20const%20items%20%3D%20ref(%5B%5D)%0A%0A%20%20%20%20%20%20function%20apiFetch%20(query%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20query%20%3D%20Object.keys(query).map(k%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20k.replace(%2F%5BA-Z%5D%2F%2C%20v%20%3D%3E%20%60_%24%7B%20v.toLowerCase()%20%7D%60)%20%2B%20%60%3D%24%7B%20query%5Bk%5D%20%7D%60%0A%20%20%20%20%20%20%20%20%7D).join('%26')%0A%0A%20%20%20%20%20%20%20%20return%20new%20Promise(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20xhr%20%3D%20new%20XMLHttpRequest()%0A%20%20%20%20%20%20%20%20%20%20xhr.open('GET'%2C%20%60https%3A%2F%2Fcps.fdota.com%2Fproducts%3F%24%7B%20query%20%7D%60)%0A%20%20%20%20%20%20%20%20%20%20xhr.onreadystatechange%20%3D%20function%20()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(xhr.readyState%20%3D%3D%204)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20resolve(JSON.parse(xhr.responseText))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20xhr.send(null)%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20async%20function%20fetch%20(query%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20%20%20loading.value%20%3D%20true%0A%20%20%20%20%20%20%20%20const%20%7B%0A%20%20%20%20%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20%20%20meta%3A%20%7B%20current_page%3A%20page%2C%20per_page%3A%20perPage%2C%20total%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%3D%20await%20apiFetch(query)%0A%20%20%20%20%20%20%20%20items.value%20%3D%20data%0A%20%20%20%20%20%20%20%20pagination.value%20%3D%20%7B%20page%2C%20perPage%2C%20total%20%7D%0A%20%20%20%20%20%20%20%20loading.value%20%3D%20false%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20fetch()%0A%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20handleOptions%3A%20(%7B%20sortBy%2C%20sortDesc%2C%20pagination%3A%20%7B%20page%2C%20perPage%20%7D%20%7D)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20fetch(%7B%20page%2C%20perPage%2C%20sortBy%2C%20descending%3A%20sortDesc%5B0%5D%20%3F%20'desc'%20%3A%20'asc'%20%7D)%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20loading%2C%0A%20%20%20%20%20%20%20%20headers%3A%20ref(%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E5%B0%81%E9%9D%A2'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%2080%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'cover'%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E6%A0%87%E9%A2%98'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20minWidth%3A%20200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'short_title'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E5%8E%9F%E4%BB%B7'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20120%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'coupons.0.coupon_product.original_price'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E5%88%B8%E5%90%8E%E4%BB%B7'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20120%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'coupons.0.coupon_product.price'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E9%94%80%E9%87%8F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20120%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'sales_count'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20sortable%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E5%88%86%E7%B1%BB'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20120%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'category_unionid'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E5%95%86%E5%AE%B6'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20150%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'shop.name'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%E5%95%86%E5%AE%B6%E5%9C%B0%E5%9D%80'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20120%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20value%3A%20'provcity'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%5D)%2C%0A%20%20%20%20%20%20%20%20items%2C%0A%20%20%20%20%20%20%20%20pagination%2C%0A%20%20%20%20%20%20%20%20fetch%2C%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D)%0A%3C%2Fscript%3E"},{default:u((()=>[d(x,null,{default:u((()=>[d(f,{remote:"","fixed-header":"",height:"400",headers:e.headers,items:e.items,loading:e.loading,pagination:e.pagination,"onUpdate:options":e.handleOptions},{"item.short_title":u((({item:e})=>[d(g,{text:e.title,"open-delay":500,anchor:"top"},{activator:u((({props:t})=>[d(v,D({href:e.url,target:"_blank"},t),{default:u((()=>[h(C(e.short_title),1)])),_:2},1040,["href"])])),_:2},1032,["text"])])),"item.cover":u((({item:e})=>[d(E,{src:e.cover,width:"50","aspect-ratio":1},null,8,["src"])])),_:1},8,["headers","items","loading","pagination","onUpdate:options"])])),_:1})])),_:1})])}]]);export{m as __pageData,B as default};
