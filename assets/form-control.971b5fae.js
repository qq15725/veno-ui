var e=(e,l,a)=>new Promise(((n,r)=>{var t=e=>{try{s(a.next(e))}catch(l){r(l)}},o=e=>{try{s(a.throw(e))}catch(l){r(l)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(t,o);s((a=a.apply(e,l)).next())}));import{e as l,z as a,F as n,J as r,M as t,G as o,a7 as s,g as i,a4 as u,$ as d,a2 as c,k as v,a5 as p,P as f,N as m,O as b,n as g}from"./index.d88d629a.js";import{L as y}from"./label.3f30a1c7.js";import{a as h,j as V,r as k,p as O,i as S,u as j,B as C,o as D}from"./vendor.b3232dc0.js";var P=Object.defineProperty,_=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,w=(e,l,a)=>l in e?P(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a;const M=l({name:"VeMessages",props:((e,l)=>{for(var a in l||(l={}))B.call(l,a)&&w(e,a,l[a]);if(_)for(var a of _(l))I.call(l,a)&&w(e,a,l[a]);return e})({active:Boolean,value:{type:[Array,String],default:()=>[]}},a({transition:{component:n,group:!0}})),setup(e,{slots:l}){const a=h((()=>r(e.value)));return()=>{const n=a.value.length>0&&e.active;return V(t,{transition:e.transition,tag:"div",class:"ve-messages"},{default:()=>{var e;return[n&&a.value.map(((e,l)=>V("div",{class:"ve-messages__message",key:l},[e]))),null==(e=null==l?void 0:l.default)?void 0:e.call(l)]},_:1},8,["transition"])}}}),$=Symbol.for("veno-ui:form"),x=o({disabled:Boolean,fastFail:Boolean,lazyValidation:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null}});function E(l){const a=s("createForm"),n=i(l,"modelValue"),r=h((()=>l.disabled)),t=h((()=>l.readonly)),o=k(!1),u=k([]),d=k([]);return O($,{register:(e,l,a,n)=>{u.value.push({id:e,validate:l,reset:a,resetValidation:n})},unregister:e=>{u.value=u.value.filter((l=>l.id!==e))},isDisabled:r,isReadonly:t,isValidating:o,items:u}),{errorMessages:d,isDisabled:r,isReadonly:t,isValidating:o,items:u,submit:function(r){return e(this,null,(function*(){r.preventDefault();const e=[];let t=!0;d.value=[],n.value=null,o.value=!0;for(const a of u.value){const n=yield a.validate();if(n.length>0&&(t=!1,e.push({id:a.id,errorMessages:n})),!t&&l.fastFail)break}d.value=e,n.value=t,o.value=!1,null==a||a.emit("submit",r)}))},reset:function(l){return e(this,null,(function*(){l.preventDefault(),u.value.forEach((e=>e.reset())),n.value=null,null==a||a.emit("reset",l)}))},resetValidation:function(){return e(this,null,(function*(){u.value.forEach((e=>e.resetValidation())),d.value=[],n.value=null,null==a||a.emit("resetValidation")}))}}}const F=["horizontal","vertical"],R=o({direction:{type:String,default:"horizontal",validator:e=>F.includes(e)}},"form-control-direction");const z=o({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null});function A(l,a=u()){const n=S($,null),r=k([]),t=k(!0),o=h((()=>!!l.disabled)),i=h((()=>!!l.readonly)),c=h((()=>{var e;return!(l.error||(null==(e=l.errorMessages)?void 0:e.length)||r.value.length)&&(!t.value||null)})),v=k(!1),p=h((()=>({[`${a}--error`]:!1===c.value,[`${a}--disabled`]:o.value,[`${a}--readonly`]:i.value}))),f=s("useValidation"),m=h((()=>{var e;return null!=(e=l.name)?e:d()}));function b(){g(),null==f||f.emit("update:modelValue",null)}function g(){t.value=!0,r.value=[]}function y(){return e(this,null,(function*(){var e,a;const n=[];r.value=[],v.value=!0;for(const r of l.rules){if(n.length>=(l.maxErrors||1))break;const t="function"==typeof r?r:()=>r,o=yield t(null!=(a=null==(e=null==l?void 0:l.modelValue)?void 0:e.value)?a:l.modelValue);!0!==o&&("string"==typeof o?n.push(o):console.warn(`${o} is not a valid value. Rule functions must return boolean true or a string.`))}return r.value=n,v.value=!1,t.value=!1,r.value}))}return C((()=>{null==n||n.register(m.value,y,b,g)})),D((()=>{null==n||n.unregister(m.value)})),{errorMessages:r,isDisabled:o,isReadonly:i,isPristine:t,isValid:c,isValidating:v,reset:b,resetValidation:g,validate:y,validationClasses:p}}var N=Object.defineProperty,H=Object.defineProperties,W=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,q=(e,l,a)=>l in e?N(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,K=(e,l)=>{for(var a in l||(l={}))J.call(l,a)&&q(e,a,l[a]);if(G)for(var a of G(l))L.call(l,a)&&q(e,a,l[a]);return e};function Q(e){return m(e,Object.keys(U.props))}const T=o(K(K(K({appendIcon:String,prependIcon:String,label:String,labelId:String,labelWidth:[String,Number],hideDetails:[Boolean,String],hint:String,messages:{type:[Array,String],default:()=>[]},persistentHint:Boolean},R()),c()),z()),"form-control"),U=v()({name:"VeFormControl",props:K({focused:Boolean},T()),emits:{"click:prepend":e=>!0,"click:label":e=>!0,"click:append":e=>!0},setup(e,{slots:l,emit:a}){const{formControlDirectionClasses:n}=function(e,l=u()){return{formControlDirectionClasses:h((()=>{const{direction:a}=j(e);return`${l}--${a}`}))}}(e),{densityClasses:r}=p(e),{errorMessages:t,isDisabled:o,isReadonly:s,isPristine:i,isValid:d,isValidating:c,reset:v,resetValidation:m,validate:k,validationClasses:O}=A(e),S=h((()=>({isDisabled:o,isReadonly:s,isPristine:i,isValid:d,isValidating:c,reset:v,resetValidation:m,validate:k})));return f((()=>{var s,i,u,c,v;const p=!(!l.prepend&&!e.prependIcon),f=!(!l.label&&!e.label),m=!(!l.append&&!e.appendIcon),h=!(!l.hint&&!e.hint),k=!!(l.messages||(null==(s=e.messages)?void 0:s.length)||t.value.length),j=!e.hideDetails||"auto"===e.hideDetails&&(k||h),C=k||h&&(e.persistentHint||e.focused);return V("div",{class:["ve-form-control",{"ve-form-control--hide-details":e.hideDetails},n.value,r.value,O.value]},[p&&V("div",{class:"ve-form-control__prepend",onClick:e=>a("click:prepend",e)},[e.prependIcon&&V(b,{icon:e.prependIcon},null,8,["icon"]),null==(i=l.prepend)?void 0:i.call(l,S.value)],8,["onClick"]),f&&V(y,{class:"ve-form-control__label",disabled:o.value,error:!1===d.value,onClick:e=>a("click:label",e),for:e.labelId,style:{width:g(e.labelWidth)}},{default:()=>{var a;return[e.label,null==(a=l.label)?void 0:a.call(l,S.value)]},_:1},8,["disabled","error","onClick","for","style"]),null==(u=l.default)?void 0:u.call(l,(D=K({},S.value),P={props:{class:"ve-form-control__control"}},H(D,W(P)))),m&&V("div",{class:"ve-form-control__append",onClick:e=>a("click:append",e)},[e.appendIcon&&V(b,{icon:e.appendIcon},null,8,["icon"]),null==(c=null==l?void 0:l.append)?void 0:c.call(l,S.value)],8,["onClick"]),j&&V("div",{class:"ve-form-control__details"},[V(M,{active:C,value:k?e.messages:[e.hint]},{default:l.messages},8,["active","value"]),null==(v=l.details)?void 0:v.call(l,S.value)])],2);var D,P})),{}}});export{U as F,x as a,R as b,E as c,Q as f,T as m};
