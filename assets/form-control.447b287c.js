import{e as k,a4 as W,W as K,X,w as Z,Z as q,p as w,j as $,g as G,a5 as B,a1 as J,a6 as Q,F as Y,a7 as ee,x as ae,I as F,A as re,l as ne}from"./app.6e85b0a5.js";import{j as d,a as v,r as O,p as le,i as te,u as oe,B as se,o as ie}from"./vendor.4a6e0395.js";var ue=Object.defineProperty,M=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,j=(e,a,r)=>a in e?ue(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,ve=(e,a)=>{for(var r in a||(a={}))ce.call(a,r)&&j(e,r,a[r]);if(M)for(var r of M(a))de.call(a,r)&&j(e,r,a[r]);return e};const fe=k({name:"VeLabel",props:ve({disabled:Boolean,error:Boolean,text:String},W()),setup(e,{slots:a}){return()=>{var r;return d("label",{class:["ve-label",{"ve-label--disabled":e.disabled,"ve-label--error":e.error}]},[e.text,(r=a.default)==null?void 0:r.call(a)],2)}}});var me=Object.defineProperty,E=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,N=(e,a,r)=>a in e?me(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,_e=(e,a)=>{for(var r in a||(a={}))pe.call(a,r)&&N(e,r,a[r]);if(E)for(var r of E(a))ge.call(a,r)&&N(e,r,a[r]);return e};const ye=k({name:"VeMessages",props:_e({active:Boolean,value:{type:[Array,String],default:()=>[]}},K({transition:{component:X,group:!0}})),setup(e,{slots:a}){const r=v(()=>Z(e.value));return()=>{const o=r.value.length>0&&e.active;return d(q,{transition:e.transition,tag:"div",class:"ve-messages"},{default:()=>{var i;return[o&&r.value.map((u,l)=>d("div",{class:"ve-messages__message",key:l},[u])),(i=a==null?void 0:a.default)==null?void 0:i.call(a)]},_:1},8,["transition"])}}}),x=Symbol.for("veno-ui:form"),Ee=w({disabled:Boolean,fastFail:Boolean,lazyValidation:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null}});function Ne(e){const a=$("createForm"),r=G(e,"modelValue"),o=v(()=>e.disabled),i=v(()=>e.readonly),u=O(!1),l=O([]),f=O([]);async function g(t){t.preventDefault();const s=[];let c=!0;f.value=[],r.value=null,u.value=!0;for(const m of l.value){const n=await m.validate();if(n.length>0&&(c=!1,s.push({id:m.id,errorMessages:n})),!c&&e.fastFail)break}f.value=s,r.value=c,u.value=!1,a==null||a.emit("submit",t)}async function y(t){t.preventDefault(),l.value.forEach(s=>s.reset()),r.value=null,a==null||a.emit("reset",t)}async function b(){l.value.forEach(t=>t.resetValidation()),f.value=[],r.value=null,a==null||a.emit("resetValidation")}return le(x,{register:(t,s,c,m)=>{l.value.push({id:t,validate:s,reset:c,resetValidation:m})},unregister:t=>{l.value=l.value.filter(s=>s.id!==t)},isDisabled:o,isReadonly:i,isValidating:u,items:l}),{errorMessages:f,isDisabled:o,isReadonly:i,isValidating:u,items:l,submit:g,reset:y,resetValidation:b}}function be(){return te(x,null)}const he=["horizontal","vertical"],Pe=w({direction:{type:String,default:"horizontal",validator:e=>he.includes(e)}},"form-control-direction");function Oe(e,a=B()){return{formControlDirectionClasses:v(()=>{const{direction:o}=oe(e);return`${a}--${o}`})}}const Ve=w({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null});function Ce(e,a=B()){const r=be(),o=O([]),i=O(!0),u=v(()=>!!e.disabled),l=v(()=>!!e.readonly),f=v(()=>{var n;return e.error||((n=e.errorMessages)==null?void 0:n.length)||o.value.length?!1:i.value?null:!0}),g=O(!1),y=v(()=>({[`${a}--error`]:f.value===!1,[`${a}--disabled`]:u.value,[`${a}--readonly`]:l.value})),b=$("useValidation"),t=v(()=>{var n;return(n=e.name)!=null?n:J()});se(()=>{r==null||r.register(t.value,m,s,c)}),ie(()=>{r==null||r.unregister(t.value)});function s(){c(),b==null||b.emit("update:modelValue",null)}function c(){i.value=!0,o.value=[]}async function m(){var n,V;const h=[];o.value=[],g.value=!0;for(const P of e.rules){if(h.length>=(e.maxErrors||1))break;const _=await(typeof P=="function"?P:()=>P)((V=(n=e==null?void 0:e.modelValue)==null?void 0:n.value)!=null?V:e.modelValue);if(_!==!0){if(typeof _!="string"){console.warn(`${_} is not a valid value. Rule functions must return boolean true or a string.`);continue}h.push(_)}}return o.value=h,g.value=!1,i.value=!1,o.value}return{errorMessages:o,isDisabled:u,isReadonly:l,isPristine:i,isValid:f,isValidating:g,reset:s,resetValidation:c,validate:m,validationClasses:y}}var we=Object.defineProperty,Ie=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,R=(e,a,r)=>a in e?we(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,C=(e,a)=>{for(var r in a||(a={}))De.call(a,r)&&R(e,r,a[r]);if(A)for(var r of A(a))ke.call(a,r)&&R(e,r,a[r]);return e},$e=(e,a)=>Ie(e,Se(a));function xe(e){return ne(e,Object.keys(Fe.props))}const Be=w(C(C(C({appendIcon:String,prependIcon:String,label:String,labelId:String,labelWidth:[String,Number],hideDetails:[Boolean,String],hint:String,messages:{type:[Array,String],default:()=>[]},persistentHint:Boolean},Pe()),Q()),Ve()),"form-control"),Fe=Y()({name:"VeFormControl",props:C({focused:Boolean},Be()),emits:{"click:prepend":e=>!0,"click:label":e=>!0,"click:append":e=>!0},setup(e,{slots:a,emit:r}){const{formControlDirectionClasses:o}=Oe(e),{densityClasses:i}=ee(e),{errorMessages:u,isDisabled:l,isReadonly:f,isPristine:g,isValid:y,isValidating:b,reset:t,resetValidation:s,validate:c,validationClasses:m}=Ce(e),n=v(()=>({isDisabled:l,isReadonly:f,isPristine:g,isValid:y,isValidating:b,reset:t,resetValidation:s,validate:c}));return ae(()=>{var V,h,P,I,_;const T=!!(a.prepend||e.prependIcon),L=!!(a.label||e.label),z=!!(a.append||e.appendIcon),D=!!(a.hint||e.hint),S=!!(a.messages||((V=e.messages)==null?void 0:V.length)||u.value.length),H=!e.hideDetails||e.hideDetails==="auto"&&(S||D),U=S||D&&(e.persistentHint||e.focused);return d("div",{class:["ve-form-control",{"ve-form-control--hide-details":e.hideDetails},o.value,i.value,m.value]},[T&&d("div",{class:"ve-form-control__prepend",onClick:p=>r("click:prepend",p)},[e.prependIcon&&d(F,{icon:e.prependIcon},null,8,["icon"]),(h=a.prepend)==null?void 0:h.call(a,n.value)],8,["onClick"]),L&&d(fe,{class:"ve-form-control__label",disabled:l.value,error:y.value===!1,onClick:p=>r("click:label",p),for:e.labelId,style:{width:re(e.labelWidth)}},{default:()=>{var p;return[e.label,(p=a.label)==null?void 0:p.call(a,n.value)]},_:1},8,["disabled","error","onClick","for","style"]),(P=a.default)==null?void 0:P.call(a,$e(C({},n.value),{props:{class:"ve-form-control__control"}})),z&&d("div",{class:"ve-form-control__append",onClick:p=>r("click:append",p)},[e.appendIcon&&d(F,{icon:e.appendIcon},null,8,["icon"]),(I=a==null?void 0:a.append)==null?void 0:I.call(a,n.value)],8,["onClick"]),H&&d("div",{class:"ve-form-control__details"},[d(ye,{active:U,value:S?e.messages:[e.hint]},{default:a.messages},8,["active","value"]),(_=a.details)==null?void 0:_.call(a,n.value)])],2)}),{}}});export{Fe as F,fe as L,Ee as a,Pe as b,Ne as c,xe as f,Be as m};
