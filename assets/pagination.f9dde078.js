import{p as e,k as a,b as t,e as l,u as i,q as r,B as n,r as s}from"./index.740d7899.js";import{a1 as u,r as o,o as v,w as p,a2 as c,c as d,b,D as f}from"./vendor.157c333c.js";const g=e({firstPage:{type:[Number,String],default:1},lastPage:{type:[Number,String],default:1,validator:e=>e%1==0},page:{type:[Number,String],default:e=>e.firstPage},perPage:{type:[Number,String],default:10},total:[Number,String]},"pagination");var y=Object.defineProperty,m=Object.defineProperties,h=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,P=(e,a,t)=>a in e?y(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,_=(e,a)=>{for(var t in a||(a={}))x.call(a,t)&&P(e,t,a[t]);if(S)for(var t of S(a))L.call(a,t)&&P(e,t,a[t]);return e},w=(e,a)=>m(e,h(a));const A=a({name:"VePagination",props:_(_({disabled:Boolean,totalVisible:[Number,String],firstIcon:{type:String,default:"$first"},prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},lastIcon:{type:String,default:"$last"},ariaLabel:{type:String,default:"分页导航"},pageAriaLabel:{type:String,default:"转到页面 {0}"},currentPageAriaLabel:{type:String,default:"当前页 {0}"},firstAriaLabel:{type:String,default:"首页"},previousAriaLabel:{type:String,default:"上一页"},nextAriaLabel:{type:String,default:"下一页"},lastAriaLabel:{type:String,default:"最后页"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,activeColor:{type:String,default:"primary"}},g()),t({tag:"nav",variant:"text"})),emits:{"update:page":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,{slots:a,emit:t}){const g=l(e,"page",e.page,(e=>Number(e))),y=d((()=>Number(e.firstPage))),m=d((()=>Number(e.lastPage))),{paperClasses:h,paperStyles:S}=i(e),x=o(-1),{resizeRef:L}=function(e){const a=o(),t=o(),l=o(),i=o(),r=new ResizeObserver((a=>{null==e||e(a,r),a.length&&(t.value=a[0].contentRect,l.value=a[0].contentBoxSize[0],i.value=a[0].borderBoxSize[0])}));return v((()=>{r.disconnect()})),p(a,((e,a)=>{a&&(r.unobserve(a),t.value=void 0,l.value=void 0,i.value=void 0),e&&r.observe(e)}),{flush:"post"}),{resizeRef:a,contentRect:u(t),contentBoxSize:u(l),borderBoxSize:u(i)}}((e=>{if(!e.length)return;const{target:a,contentRect:t}=e[0],l=a.querySelector(".ve-pagination__list > *");if(!l)return;const i=t.width,r=l.getBoundingClientRect().width+10;x.value=Math.max(0,Math.floor((i-96)/r))})),P=d((()=>{var a;return e.totalVisible?Math.min(Number(null!=(a=e.totalVisible)?a:""),m.value):x.value>=0?x.value:Math.min(7,m.value)})),A=d((()=>{if(m.value<=0)return[];if(P.value<=3)return[Math.min(Math.max(y.value,g.value),y.value+m.value)];if(m.value<=P.value)return r(m.value,y.value);const a=Math.ceil(P.value/2),t=a,l=m.value-a;if(g.value<t)return[...r(Math.max(1,P.value-2),y.value),e.ellipsis,m.value];if(g.value>l){const a=P.value-2,t=m.value-a+y.value;return[y.value,e.ellipsis,...r(a,t)]}{const a=Math.max(1,P.value-4),t=1===a?g.value:g.value-Math.ceil(a/2)+y.value;return[y.value,e.ellipsis,...r(a,t),e.ellipsis,m.value]}}));function z(e,a,l){e.preventDefault(),g.value=a,l&&t(l,a)}const{refs:C,updateRef:M}=function(){const e=o([]);return c((()=>e.value=[])),{refs:e,updateRef:function(a,t){e.value[t]=a}}}(),N=d((()=>{const a={density:e.density,shape:e.shape,size:e.size};return A.value.map(((t,l)=>{const i=e=>M(e,l);if("string"==typeof t)return{isActive:!1,page:t,props:w(_({},a),{ref:i,ellipsis:!0,icon:!0,disabled:!0,variant:e.variant,border:e.border})};{const l=t===g.value;return{isActive:l,page:t,props:w(_({},a),{ref:i,ellipsis:!1,icon:!0,disabled:e.disabled||m.value<2,elevation:e.elevation,variant:e.variant,border:e.border,color:l?e.activeColor:void 0,ariaCurrent:l,ariaLabel:l?e.currentPageAriaLabel:e.pageAriaLabel,onClick:e=>z(e,t)})}}}))})),O=d((()=>{const a={color:void 0,density:e.density,shape:e.shape,size:e.size,variant:e.variant,border:e.border},t=e.disabled||g.value<=y.value,l=e.disabled||g.value>=y.value+m.value-1;return{first:e.showFirstLastPage?w(_({},a),{icon:e.firstIcon,onClick:e=>z(e,y.value,"first"),disabled:t,ariaLabel:e.firstAriaLabel,ariaDisabled:t}):void 0,prev:w(_({},a),{icon:e.prevIcon,onClick:e=>z(e,g.value-1,"prev"),disabled:t,ariaLabel:e.previousAriaLabel,ariaDisabled:t}),next:w(_({},a),{icon:e.nextIcon,onClick:e=>z(e,g.value+1,"next"),disabled:l,ariaLabel:e.nextAriaLabel,ariaDisabled:l}),last:e.showFirstLastPage?w(_({},a),{icon:e.lastIcon,onClick:e=>z(e,y.value+m.value-1,"last"),disabled:l,ariaLabel:e.lastAriaLabel,ariaDisabled:l}):void 0}}));function k(){var e;const a=g.value-y.value;null==(e=C.value[a])||e.$el.focus()}function I(a){a.key===s.left&&!e.disabled&&g.value>y.value?(g.value=g.value-1,f(k)):a.key===s.right&&!e.disabled&&g.value<y.value+m.value-1&&(g.value=g.value+1,f(k))}return()=>b(e.tag,{ref:L,class:["ve-pagination",h.value],style:[S.value],role:"navigation","aria-label":e.ariaLabel,onKeydown:I},{default:()=>[b("ul",{class:"ve-pagination__list"},[e.showFirstLastPage&&b("li",{class:"ve-pagination__first"},[a.first?a.first(O.value.first):b(n,O.value.first,null,16)]),b("li",{class:"ve-pagination__prev"},[a.prev?a.prev(O.value.prev):b(n,O.value.prev,null,16)]),N.value.map(((e,t)=>b("li",{key:`${t}_${e.page}`,class:["ve-pagination__item",{"ve-pagination__item--is-active":e.isActive}]},[a.item?a.item(e):b(n,e.props,{default:()=>[e.page]},16)],2))),b("li",{class:"ve-pagination__next"},[a.next?a.next(O.value.next):b(n,O.value.next,null,16)]),e.showFirstLastPage&&b("li",{class:"ve-pagination__last"},[a.last?a.last(O.value.last):b(n,O.value.last,null,16)])])]},8,["class","style","aria-label","onKeydown"])}});export{A as P,g as m};
