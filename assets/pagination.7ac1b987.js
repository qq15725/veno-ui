import{p as e,k as a,b as t,e as l,u as i,q as r,B as n,r as s,v as u}from"./index.1caa3696.js";import{a1 as o,r as v,o as p,w as c,a2 as d,c as b,a as f,A as g}from"./vendor.4e3c54b7.js";const y=e({firstPage:{type:[Number,String],default:1},lastPage:{type:[Number,String],default:1,validator:e=>e%1==0},page:{type:[Number,String],default:e=>e.firstPage},perPage:{type:[Number,String],default:10},total:[Number,String]},"pagination");var m=Object.defineProperty,S=Object.defineProperties,h=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,_=(e,a,t)=>a in e?m(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,A=(e,a)=>{for(var t in a||(a={}))L.call(a,t)&&_(e,t,a[t]);if(x)for(var t of x(a))P.call(a,t)&&_(e,t,a[t]);return e},w=(e,a)=>S(e,h(a));const z=a({name:"VePagination",props:w(A(A({disabled:Boolean,totalVisible:[Number,String],firstIcon:{type:String,default:"veno-ui:$first"},prevIcon:{type:String,default:"veno-ui:$prev"},nextIcon:{type:String,default:"veno-ui:$next"},lastIcon:{type:String,default:"veno-ui:$last"},ariaLabel:{type:String,default:"分页导航"},pageAriaLabel:{type:String,default:"转到页面 {0}"},currentPageAriaLabel:{type:String,default:"当前页 {0}"},firstAriaLabel:{type:String,default:"首页"},previousAriaLabel:{type:String,default:"上一页"},nextAriaLabel:{type:String,default:"下一页"},lastAriaLabel:{type:String,default:"最后页"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,activeColor:{type:String,default:"primary"}},y()),t({tag:"nav"})),{variant:{type:String,default:"text",validator:e=>s.includes(e)}}),emits:{"update:page":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,{slots:a,emit:t}){const s=l(e,"page",e.page,(e=>Number(e))),y=b((()=>Number(e.firstPage))),m=b((()=>Number(e.lastPage))),{paperClasses:S,paperStyles:h}=i(e),x=v(-1),{resizeRef:L}=function(e){const a=v(),t=v(),l=v(),i=v(),r=new ResizeObserver((a=>{null==e||e(a,r),a.length&&(t.value=a[0].contentRect,l.value=a[0].contentBoxSize[0],i.value=a[0].borderBoxSize[0])}));return p((()=>{r.disconnect()})),c(a,((e,a)=>{a&&(r.unobserve(a),t.value=void 0,l.value=void 0,i.value=void 0),e&&r.observe(e)}),{flush:"post"}),{resizeRef:a,contentRect:o(t),contentBoxSize:o(l),borderBoxSize:o(i)}}((e=>{if(!e.length)return;const{target:a,contentRect:t}=e[0],l=a.querySelector(".ve-pagination__list > *");if(!l)return;const i=t.width,r=l.getBoundingClientRect().width+10;x.value=Math.max(0,Math.floor((i-96)/r))})),P=b((()=>{var a;return e.totalVisible?Math.min(Number(null!=(a=e.totalVisible)?a:""),m.value):x.value>=0?x.value:Math.min(7,m.value)})),_=b((()=>{if(m.value<=0)return[];if(P.value<=3)return[Math.min(Math.max(y.value,s.value),y.value+m.value)];if(m.value<=P.value)return r(m.value,y.value);const a=Math.ceil(P.value/2),t=a,l=m.value-a;if(s.value<t)return[...r(Math.max(1,P.value-2),y.value),e.ellipsis,m.value];if(s.value>l){const a=P.value-2,t=m.value-a+y.value;return[y.value,e.ellipsis,...r(a,t)]}{const a=Math.max(1,P.value-4),t=1===a?s.value:s.value-Math.ceil(a/2)+y.value;return[y.value,e.ellipsis,...r(a,t),e.ellipsis,m.value]}}));function z(e,a,l){e.preventDefault(),s.value=a,l&&t(l,a)}const{refs:C,updateRef:M}=function(){const e=v([]);return d((()=>e.value=[])),{refs:e,updateRef:function(a,t){e.value[t]=a}}}(),N=b((()=>{const a={density:e.density,shape:e.shape,size:e.size};return _.value.map(((t,l)=>{const i=e=>M(e,l);if("string"==typeof t)return{isActive:!1,page:t,props:w(A({},a),{ref:i,ellipsis:!0,icon:!0,disabled:!0,variant:e.variant,border:e.border})};{const l=t===s.value;return{isActive:l,page:t,props:w(A({},a),{ref:i,ellipsis:!1,icon:!0,disabled:!!e.disabled||m.value<2,elevation:e.elevation,variant:e.variant,border:e.border,color:l?e.activeColor:void 0,ariaCurrent:l,ariaLabel:l?e.currentPageAriaLabel:e.pageAriaLabel,onClick:e=>z(e,t)})}}}))})),O=b((()=>{const a={color:void 0,density:e.density,shape:e.shape,size:e.size,variant:e.variant,border:e.border},t=!!e.disabled||s.value<=y.value,l=!!e.disabled||s.value>=y.value+m.value-1;return{first:e.showFirstLastPage?w(A({},a),{icon:e.firstIcon,onClick:e=>z(e,y.value,"first"),disabled:t,ariaLabel:e.firstAriaLabel,ariaDisabled:t}):void 0,prev:w(A({},a),{icon:e.prevIcon,onClick:e=>z(e,s.value-1,"prev"),disabled:t,ariaLabel:e.previousAriaLabel,ariaDisabled:t}),next:w(A({},a),{icon:e.nextIcon,onClick:e=>z(e,s.value+1,"next"),disabled:l,ariaLabel:e.nextAriaLabel,ariaDisabled:l}),last:e.showFirstLastPage?w(A({},a),{icon:e.lastIcon,onClick:e=>z(e,y.value+m.value-1,"last"),disabled:l,ariaLabel:e.lastAriaLabel,ariaDisabled:l}):void 0}}));function k(){var e;const a=s.value-y.value;null==(e=C.value[a])||e.$el.focus()}function I(a){a.key===u.left&&!e.disabled&&s.value>y.value?(s.value=s.value-1,g(k)):a.key===u.right&&!e.disabled&&s.value<y.value+m.value-1&&(s.value=s.value+1,g(k))}return()=>f(e.tag,{ref:L,class:["ve-pagination",S.value],style:[h.value],role:"navigation","aria-label":e.ariaLabel,onKeydown:I},{default:()=>[f("ul",{class:"ve-pagination__list"},[e.showFirstLastPage&&f("li",{class:"ve-pagination__first"},[a.first?a.first(O.value.first):f(n,O.value.first,null,16)]),f("li",{class:"ve-pagination__prev"},[a.prev?a.prev(O.value.prev):f(n,O.value.prev,null,16)]),N.value.map(((e,t)=>f("li",{key:`${t}_${e.page}`,class:["ve-pagination__item",{"ve-pagination__item--is-active":e.isActive}]},[a.item?a.item(e):f(n,e.props,{default:()=>[e.page]},16)],2))),f("li",{class:"ve-pagination__next"},[a.next?a.next(O.value.next):f(n,O.value.next,null,16)]),e.showFirstLastPage&&f("li",{class:"ve-pagination__last"},[a.last?a.last(O.value.last):f(n,O.value.last,null,16)])])]},8,["class","style","aria-label","onKeydown"])}});export{z as P,y as m};
