import{e,u as l,f as a}from"./index.59e593d7.js";import{r as n,a as r,m as o,e as s,j as t}from"./vendor.b3232dc0.js";const u=e({name:"VeCode",props:{value:String,language:{type:String,default:"html"},hideLanguage:Boolean,hideLineNumbers:Boolean,highlightedLineNumbers:Array,highlightedLineBgColor:{type:String,default:"warning"},color:{type:String,default:"secondary"}},setup(e,{slots:u}){const i=l(),{backgroundColorClasses:d,backgroundColorStyles:c}=a(e,"color"),{backgroundColorClasses:v,backgroundColorStyles:g}=a(e,"highlightedLineBgColor"),h=n(null),p=r((()=>{var l;return decodeURIComponent(null!=(l=e.value)?l:"").replace(/\n$/,"").replace(/^\n/,"")})),m=r((()=>p.value.split("\n").map(((e,l)=>l+1)))),y=r((()=>m.value.filter((l=>{var a;return null==(a=e.highlightedLineNumbers)?void 0:a.some((e=>{let a,n=e;return"object"==typeof e&&([n,a]=e),n&&a?l>=n&&l<=a:l===n}))}))));function _(){return l=this,a=null,n=function*(){var l;const a=h.value;a&&(a.innerHTML=yield null==(l=i.value)?void 0:l.highlight(p.value,e.language))},new Promise(((e,r)=>{var o=e=>{try{t(n.next(e))}catch(l){r(l)}},s=e=>{try{t(n.throw(e))}catch(l){r(l)}},t=l=>l.done?e(l.value):Promise.resolve(l.value).then(o,s);t((n=n.apply(l,a)).next())}));var l,a,n}return o(_),s((()=>e.language),_),s(p,_),()=>{const l=!!p.value,a=l&&!e.hideLineNumbers,n=l&&!e.hideLanguage&&e.language,r=l;return t(l?"div":"code",{class:["ve-code",{"ve-code--highlighted":l,"ve-code--line-numbers":a},d.value],style:c.value},{default:()=>{var l;return[a&&t("div",{class:"ve-code__lines"},[m.value.map((e=>t("div",{class:["ve-code__line",{"ve-code__line--highlighted":y.value.includes(e)}]},[t("div",{class:["ve-code__line-overlay",v.value],style:g.value,innerHTML:"&nbsp;"},null,14,["innerHTML"]),t("span",{class:"ve-code__line-number"},[e])],2)))]),r&&t("pre",{class:"ve-code__preformatted"},[t("code",{ref:h},[p.value],512)]),n&&t("span",{class:"ve-code__language"},[e.language]),null==(l=u.default)?void 0:l.call(u)]},_:1},8,["class","style"])}}});export{u as C};
