@forward 'variables';
@use 'sass:math';
@use 'variables' as *;
@use '../../../styles/tools';
@use '../../../styles/settings';

// Blocks
.ve-tag {
  $root: &;

  --ve-default-font-size: #{tools.map-deep-get(settings.$typography, 'button', 'size')};
  --ve-font-size: calc(var(--ve-default-font-size) + var(--ve-font-size-offset, 0px));
  --ve-default-height: 32px;
  --ve-height: calc(var(--ve-default-height) + var(--ve-size-offset, 0px) + var(--ve-density-offset, 0px));
  --ve-padding-x: calc(var(--ve-height) / (2 + 2 / 3));
  --ve-avatar-height: calc(var(--ve-height) - 8px);
  --ve-pill-avatar-height: var(--ve-height);
  --ve-avatar-icon-font-size: var(--ve-font-size);

  align-items: center;
  align-self: center;
  display: inline-flex;
  font-weight: 400;
  font-size: var(--ve-font-size);
  height: var(--ve-height);
  overflow: hidden;
  position: relative;
  padding: 0 var(--ve-padding-x);
  text-overflow: ellipsis;
  vertical-align: middle;
  white-space: nowrap;
  @include tools.use-paper($tag-paper);
  @include tools.overlay(#{&}__overlay, 0, visible);
  @include tools.states(#{&}__overlay);

  // Modifiers
  @each $name, $multiplier in settings.$sizes {
    &--size-#{$name} {
      --ve-size-offset: #{$multiplier * 6px};
      --ve-font-size-offset: #{math.div(2 * $multiplier, 16)}px;
    }
  }

  &--link {
    cursor: pointer;
  }

  // Elements
  &__prepend,
  &__append,
  &__close {
    align-items: center;
    display: inline-flex;
  }

  &__prepend {
    margin-inline-start: calc(var(--ve-padding-x) * -0.5);
    margin-inline-end: calc(var(--ve-padding-x) * 0.5);
  }

  #{$root}--shape-pill &__prepend {
    margin-inline-start: calc(var(--ve-padding-x) * -1);
  }

  &__append,
  &__close {
    margin-inline-end: calc(var(--ve-padding-x) * -0.5);
    margin-inline-start: calc(var(--ve-padding-x) * 0.5);
  }

  #{$root}--shape-pill &__append {
    margin-inline-end: calc(var(--ve-padding-x) * -1);
  }

  &__close > .ve-button {
    min-width: auto;
    height: auto;
    font-size: var(--ve-avatar-icon-font-size);
  }

  .ve-avatar {
    --ve-height: var(--ve-avatar-height);

    > .ve-icon {
      --ve-font-size: var(--ve-avatar-icon-font-size);
    }
  }

  &--shape-pill .ve-avatar {
    --ve-height: var(--ve-pill-avatar-height);
  }
}