@forward './variables';
@use '../../../styles/tools';
@use '../../../styles/settings';
@use './variables' as *;

.ve-form-control {
  $root: &;
  // CSS Variables
  // --ve-form-control__control---height 32px
  --ve-control-height: calc(var(--ve-form-control__control---height, 32px) + var(--ve-density-offset, 0px));
  display: grid;
  grid-template-areas: "prepend label control append" "a b details c";
  grid-template-columns: max-content max-content auto max-content;
  grid-template-rows: auto auto;
  @include tools.use-density((
    densities: $form-control-densities
  ));

  &--vertical {
    grid-template-areas: "a label b" "prepend control append" "c details d";
    grid-template-columns: max-content auto max-content;
    grid-template-rows: auto auto;

    #{$root}__label {
      margin-block-end: 8px;
    }
  }

  &--inline {
    margin-inline-end: 16px;
  }

  &--disabled {
    pointer-events: none;

    &,
    input {
      color: rgba(var(--ve-theme-on-surface), var(--ve-disabled-opacity));
    }
  }

  input {
    color: inherit;
  }

  @at-root {
    &--inline,
    &--horizontal {
      #{$root}__label {
        margin-inline-end: 16px;
        justify-content: end;
      }
    }

    &--horizontal,
    &--vertical {
      &#{$root}--hide-details + &#{$root}--hide-details {
        margin-top: 8px;
      }
    }

    &--inline {
      &#{$root}--hide-details {
        margin: 4px;
      }
    }
  }

  &__prepend,
  &__append,
  &__control {
    display: flex;
    align-items: center;
    align-self: center;
    flex-wrap: wrap;
  }

  &__prepend {
    grid-area: prepend;
    margin-inline-end: 16px;
  }

  &__label {
    grid-area: label;
    display: inline-flex;
  }

  &__control {
    grid-area: control;
    width: 100%;
    min-height: var(--ve-control-height);
  }

  &__append {
    grid-area: append;
    margin-inline-start: 16px;
  }

  &__details {
    align-items: flex-end;
    display: flex;
    font-size: .75rem;
    font-weight: 400;
    grid-area: details;
    line-height: normal;
    min-height: 22px;
    overflow: hidden;
    padding: 4px;
    justify-content: space-between;
  }
}